---
title: "Test wflow_archive and wflow_restore"
author: "First Last"
date: YYYY-MM-DD
output: html_document
---

```{r read-chunk, include=FALSE, cache=FALSE}
knitr::read_chunk("chunks.R")
```

```{r knitr-opts-chunk, include=FALSE}
```

**Last updated:** `r Sys.Date()`

**Code version:** `r workflowr::extract_commit(".", 1)$sha1`

```{r packages}
library("workflowr")
library("ggplot2")
theme_set(theme_bw())
```

Generate some values from a normal distribution.

```{r create}
mean_value <- sample(1:10, size = 1)
normal_dist <- rnorm(5, mean = mean_value)
```

## Archive and restore

Archive them.

```{r archive}
wflow_archive(mean_value, normal_dist, subdir = "archive.Rmd")
```

Restore them.

```{r restore}
restored <- wflow_restore(mean_value, normal_dist, subdir = "archive.Rmd")
str(restored)
```

## Analysis

Analyze them.

```{r analysis}
mean_set <- unlist(restored$mean_value)
mean_estimate <- sapply(restored$normal_dist, function(x) mean(x))
error <- abs(mean_set - mean_estimate)
d <- data.frame(mean_set, error, commit = names(error))
ggplot(d, aes(x = mean_set, y = error, label = commit)) +
  geom_text() +
  labs(x = "Actual mean",
       y = "Absolute error between actual and estimated mean",
       title = "Relationship between the mean, its estimation error, and commit")
```

## Session Information

```{r session-info}
```
